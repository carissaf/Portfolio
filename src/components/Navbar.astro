---
import RabbitIcon from "./icons/RabbitIcon.astro";
const { currPage } = Astro.props;

const links = ['/home', '/about', '/projects']
---

<nav class="flex flex-row justify-between bg-gradient-to-b from-white content-center align-center px-7 py-3 md:px-[7vw] md:py-5 fixed w-full font-light z-10 opacity-0 transform -translate-y-5 transition-all duration-700 ease-in-out">
    <!--<div class="background absolute w-full flex h-full top-0 left-0 bg-white" style="z-index: -1"></div>-->
    <a href="/" class="text-3xl content-center z-10">
        <RabbitIcon className="w-7 md:w-9"/>
    </a>

    <div class="hidden md:flex self-center flex-row text-xl">
        {
            links.map(link => (
                <a class={link === currPage ? "relative ml-10 curr-page" : "relative content-center ml-10 link"}
                href={link === "/home" ? "/" : link}>
                    {link}
                </a>
            ))
        }
    </div>

    <button class="hamburger flex md:hidden items-center top-0 right-0 relative w-7 h-7 self-center z-10"></button>

    <div class="sidebar absolute top-0 left-0 w-full min-h-screen bg-white hidden md:hidden">
        <div class="flex flex-col p-4">
            {
                links.map(link => (
                        <a class="my-2 text-xl" href={link === "/home" ? "/" : link}>
                            {link}
                        </a>
                ))
            }
        </div>
    </div>
</nav>

<style>
    .hamburger:before, .hamburger:after{
        content: "";
        position: absolute;
        height: 2px;
        width: 100%;
        right: 0;
        background-color: black;
        transition: all ease-out .3s;
    }

    .hamburger:before{
        top: 25%;
    }

    .hamburger:after{
        bottom: 25%;
        width: 75%;
    }

    .open:after{
        top: 50%;
        width: 100%;
        transform: rotate(-45deg);
    }

    .open:before{
        top: 50%;
        width: 100%;
        transform: rotate(45deg);
    }

    .curr-page::before{
        content: '';
        background-color: #FBDD7F;
        position: absolute;
        left: -0.2vw;
        bottom: 0;
        opacity: 50%;
        width: 100%;
        height: 50%;
        z-index: -1;
    }

    .link::before{
        content: '';
        background-color: #FBDD7F;
        position: absolute;
        left: -0.2vw;
        bottom: 0;
        opacity: 30%;
        width: 0;
        height: 50%;
        z-index: -1;
        transition: all .35s ease-in-out;
        //transition: 0.35s cubic-bezier(0.25, 0.1, 0, 1.5);
    }

    .link:hover::before {
        opacity: 50%;
        width: 100%;
        bottom: 0;
        height: 50%;
    }
</style>

<script>
    window.addEventListener('DOMContentLoaded', function() {
        const navbar = document.querySelector('nav');
        navbar.classList.remove('opacity-0', '-translate-y-5');
        navbar.classList.add('opacity-1', 'translate-y-0');
    });

    const hamburger = document.querySelector('.hamburger');
    const menu = document.querySelector('.sidebar');

    hamburger.addEventListener('click', function() {
        menu.classList.toggle('hidden');
        hamburger.classList.toggle('open');
    });
</script>
